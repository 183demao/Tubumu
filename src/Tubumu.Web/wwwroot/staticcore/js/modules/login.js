webpackJsonp([12],{"/rEA":function(t,e,n){"use strict";(function(t){function i(t,e,n){this.name="ApiError",this.message=t||"Default Message",this.errorType=e||g.Default,this.innerError=n,this.stack=(new Error).stack}var o=n("//Fk"),r=n.n(o),a=n("mvHQ"),s=n.n(a),u=n("OvRC"),l=n.n(u),d=n("mtWM"),f=n.n(d),c=n("mw3O"),m=n.n(c),p=n("bzuE"),g={Default:"default",Sysetem:"sysetem"};(i.prototype=l()(Error.prototype)).constructor=i;var h=f.a.create({baseURL:p.a,timeout:2e4,responseType:"json",withCredentials:!0});h.interceptors.request.use(function(t){return"post"===t.method||"put"===t.method||"patch"===t.method?(t.headers={"Content-Type":"application/json; charset=UTF-8"},t.data=s()(t.data)):"delete"!==t.method&&"get"!==t.method&&"head"!==t.method||(t.paramsSerializer=function(t){return m.a.stringify(t,{arrayFormat:"indices"})}),localStorage.token&&(t.headers.Authorization="Bearer "+localStorage.token),t},function(t){return t}),h.interceptors.response.use(function(e){if(-1===e.headers["content-type"].indexOf("json"))return e;var n=void 0;if("arraybuffer"===e.request.responseType&&"[object ArrayBuffer]"===e.data.toString()){var o=t.from(e.data).toString("utf8");console.log(o),n=JSON.parse(o)}else n=e.data;if(n){if(n.url)return void(top.location=n.url);if(200!==n.code)return console.log(n),r.a.reject(new i(n.message));n.token&&(localStorage.token=n.token)}return e},function(t){return r.a.reject(new i(t.message,g.Sysetem,t))}),e.a={install:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.httpClient=h,t.prototype.$httpClient=h}}}).call(e,n("EuP9").Buffer)},"44wC":function(t,e){},PxPL:function(t,e,n){"use strict";var i=n("bzuE"),o=n("M4fF"),r=n.n(o),a=n("VsUZ"),s=n("NC6I"),u=n.n(s),l=n("3UNf");e.a={data:function(){return{isLoading:!1,refreshValidationCodeUrlBase:i.a+"/Admin/GetValidationCode",refreshValidationCodeUrl:null,mainForm:{account:i.b,password:i.c,validationCode:""},mainFormRules:{account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:2,message:"最少支持2个字符",trigger:"blur"},{max:20,message:"最多支持20个字符",trigger:"blur"},{pattern:/^([a-zA-Z][a-zA-Z0-9-_]*)|(1(3|4|5|7|8)\d{9})|([\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?)$/,message:"请输入合法的用户名、手机号或邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"最少支持6个字符",trigger:"blur"},{max:32,message:"最多支持32个字符",trigger:"blur"}],validationCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{max:32,message:"最多支持32个字符",trigger:"blur"}]},isRemberPassword:!0}},mounted:function(){this.refreshValidationCodeUrl=this.refreshValidationCodeUrlBase},methods:{handleReset:function(t){this.$refs.mainForm.resetFields()},handleSubmit:function(t){var e=this;this.$refs.mainForm.validate(function(t){if(!t)return!1;e.isLoading=!0;var n=r.a.cloneDeep(e.mainForm);n.password=u()(n.password),a.a.login(n).then(function(t){},function(t){e.isLoading=!1,e.showErrorMessage(t.message),e.handleRefreshValidationCode(null)})})},handleRefreshValidationCode:function(t){this.refreshValidationCodeUrl=this.refreshValidationCodeUrlBase+"?"+(new Date).getTime(),this.mainForm.validationCode="",t&&this.$refs.validationCode.focus()},handleFocus:function(t){this.$refs[t].focus()},showErrorMessage:function(t){this.$message({message:t,type:"error"})},testDownload:function(){var t=this;this.isLoading=!0;a.a.download("http://192.168.0.108:9005/manager/api/Project/Report/ImportAttendance",{Cityname:"35dea0e5-9b9f-4b8b-981e-2e1120b1c317",DeliveryFeeBillCsvPath:"/UserFiles/5/files/2017-11-27-2017-12-04配送费账单(1).csv"}).then(function(e){t.isLoading=!1,l(e.data,"test.xlsx")},function(e){t.isLoading=!1,t.showErrorMessage(e.message)})}}}},VsUZ:function(t,e,n){"use strict";var i=n("7+uW");e.a={login:function(t){return i.default.httpClient.post("/admin/login",t)},logout:function(){return i.default.httpClient.post("/admin/logout")},getProfile:function(){return i.default.httpClient.get("/admin/getProfile")},changeProfile:function(t){return i.default.httpClient.post("/admin/changeProfile",t)},changePassword:function(t){return i.default.httpClient.post("/admin/changePassword",t)},getMenus:function(){return i.default.httpClient.get("/admin/getMenus")},getBulletin:function(){return i.default.httpClient.get("/admin/getBulletin")},editBulletin:function(t){return i.default.httpClient.post("/admin/editBulletin",t)},getModulePermissions:function(){return i.default.httpClient.get("/admin/getModulePermissions")},extractModulePermissions:function(){return i.default.httpClient.get("/admin/extractModulePermissions")},clearModulePermissions:function(){return i.default.httpClient.get("/admin/clearModulePermissions")},getRoles:function(){return i.default.httpClient.get("/admin/getRoles")},addRole:function(t){return i.default.httpClient.post("/admin/addRole",t)},editRole:function(t){return i.default.httpClient.post("/admin/editRole",t)},removeRole:function(t){return i.default.httpClient.post("/admin/removeRole",t)},moveRole:function(t){return i.default.httpClient.post("/admin/moveRole",t)},saveRoleName:function(t){return i.default.httpClient.post("/admin/saveRoleName",t)},getGroupTree:function(){return i.default.httpClient.get("/admin/getGroupTree")},addGroup:function(t){return i.default.httpClient.post("/admin/addGroup",t)},editGroup:function(t){return i.default.httpClient.post("/admin/editGroup",t)},removeGroup:function(t){return i.default.httpClient.post("/admin/removeGroup",t)},moveGroup:function(t){return i.default.httpClient.post("/admin/moveGroup",t)},getUsers:function(t){return i.default.httpClient.post("/admin/getUsers",t)},addUser:function(t){return i.default.httpClient.post("/admin/addUser",t)},editUser:function(t){return i.default.httpClient.post("/admin/editUser",t)},removeUser:function(t){return i.default.httpClient.post("/admin/removeUser",t)},getUserStatus:function(){return i.default.httpClient.get("/admin/getUserStatus")},getNotificationsForManager:function(t){return i.default.httpClient.post("/admin/getNotificationsForManager",t)},addNotification:function(t){return i.default.httpClient.post("/admin/addNotification",t)},editNotification:function(t){return i.default.httpClient.post("/admin/editNotification",t)},removeNotification:function(t){return i.default.httpClient.post("/admin/removeNotification",t)},getNotifications:function(t){return i.default.httpClient.post("/admin/getNotifications",t)},readNotifications:function(t){return i.default.httpClient.post("/admin/readNotifications",t)},deleteNotifications:function(t){return i.default.httpClient.post("/admin/deleteNotifications",t)},getNewestNotification:function(t){return i.default.httpClient.post("/admin/getNewestNotification",t)},getGroups:function(){return i.default.httpClient.get("/admin/getGroups")},getRoleBases:function(){return i.default.httpClient.get("/admin/getRoleBases")},getPermissionTree:function(){return i.default.httpClient.get("/admin/getPermissionTree")},callDirectly:function(t){return i.default.httpClient.get(t)},download:function(t,e){return i.default.httpClient.post(t,e,{responseType:"arraybuffer"})}}},YGup:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.isLoading,expression:"isLoading",modifiers:{fullscreen:!0,lock:!0}}],ref:"mainForm",staticClass:"container",attrs:{model:t.mainForm,rules:t.mainFormRules,"label-position":"left","label-width":"0px"}},[n("h3",{staticClass:"title"},[t._v("系统登录")]),t._v(" "),n("el-form-item",{attrs:{prop:"account"}},[n("el-input",{ref:"account",attrs:{type:"text",autocomplete:"on",placeholder:"账号(用户名、手机号或邮箱)",autofocus:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleFocus("password")}},model:{value:t.mainForm.account,callback:function(e){t.$set(t.mainForm,"account","string"==typeof e?e.trim():e)},expression:"mainForm.account"}},[n("font-awesome-icon",{attrs:{slot:"prefix",icon:"user-secret"},slot:"prefix"})],1)],1),t._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{ref:"password",attrs:{type:"password",autocomplete:"off",placeholder:"密码"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleFocus("validationCode")}},model:{value:t.mainForm.password,callback:function(e){t.$set(t.mainForm,"password","string"==typeof e?e.trim():e)},expression:"mainForm.password"}},[n("font-awesome-icon",{attrs:{slot:"prefix",icon:"key"},slot:"prefix"})],1)],1),t._v(" "),n("el-form-item",{attrs:{prop:"validationCode"}},[n("el-input",{ref:"validationCode",staticClass:"validationCode",attrs:{type:"text",autocomplete:"off",placeholder:"验证码"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleSubmit(e):null}},model:{value:t.mainForm.validationCode,callback:function(e){t.$set(t.mainForm,"validationCode","string"==typeof e?e.trim():e)},expression:"mainForm.validationCode"}}),t._v(" "),n("img",{staticClass:"validationCodeImage",attrs:{src:t.refreshValidationCodeUrl},on:{click:t.handleRefreshValidationCode}})],1),t._v(" "),n("el-form-item",{staticStyle:{width:"100%"}},[n("el-button",{staticClass:"login",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("登录")])],1)],1)},staticRenderFns:[]};e.a=i},Z4L9:function(t,e,n){"use strict";var i=n("PxPL"),o=n("YGup"),r=function(t){n("44wC")},a=n("VU/8")(i.a,o.a,!1,r,"data-v-1d69c17a",null);e.a=a.exports},bzuE:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return r});var i="/api",o="",r=""},rFs4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("tvR6"),o=(n.n(i),n("qBF2")),r=n.n(o),a=n("7+uW"),s=n("/rEA"),u=n("Z4L9"),l=n("C/JF"),d=n("fhbW"),f=n("1e6/");l.c.add(d.b,d.a),a.default.config.productionTip=!1,a.default.use(s.a),a.default.use(r.a,{size:"small"}),a.default.component("font-awesome-icon",f.a),new a.default({el:"#app",render:function(t){return t(u.a)}})},tvR6:function(t,e){}},["rFs4"]);
//# sourceMappingURL=login.js.map